## --- Fix guidance for jlink / JDK issues ---
# If you hit errors about jlink/jdk image (Error while executing process ... jlink.exe),
# follow these steps and then rebuild.
#
# 1) Install a standalone JDK 17 (Eclipse Temurin recommended):
#    https://adoptium.net/latest.html?variant=openjdk17
#    Example install path: C:\Program Files\Eclipse Adoptium\jdk-17.0.8.1-hotspot
#
# 2) Verify Java in PowerShell (replace the path if different):
#    $jdkPath = 'C:\Program Files\Eclipse Adoptium\jdk-17.0.8.1-hotspot'
#    $env:JAVA_HOME = $jdkPath
#    $env:PATH = "$jdkPath\bin;$env:PATH"
#    java -version
#    .\gradlew.bat --version
#
# 3) If verification succeeds, set Gradle to use that JDK persistently by
#    adding (uncomment and update) the following line below:
#    org.gradle.java.home=C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.8.1-hotspot
#
# 4) Clear the Gradle transform cache and run a clean build:
#    .\gradlew.bat --stop
#    Remove-Item -Recurse -Force "$env:USERPROFILE\.gradle\caches\transforms-3" -ErrorAction SilentlyContinue
#    .\gradlew.bat clean assembleDebug --stacktrace --info > build.log 2>&1
#    Get-Content build.log -Tail 200
#
# If you prefer, give me the exact JDK path and I will write the persistent
# `org.gradle.java.home` entry for you. Otherwise follow the steps above.
## --- End guidance ---

## Increase Gradle JVM memory to help annotation processors/jlink
org.gradle.java.home=C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.17.10-hotspot
org.gradle.jvmargs=-Xmx4096m -Dfile.encoding=UTF-8

## AGGRESSIVE FIX: Disable all JDK/NDK image transforms and module features
## This completely bypasses the jlink error by disabling Java modules system
org.gradle.java.modules=false
org.gradle.java.home.modules=false

## Disable Android NDK and native code features
android.buildFeatures.jni=false
android.buildFeatures.prefab=false
android.disableNdkComponentsForDeps=true

## Disable problematic Android Gradle Plugin features
android.disableLinuxArmNative=true
android.lint.useK2Uast=false
android.suppressUnsupportedCompileSdk=34

## Enable AndroidX and Jetifier support
android.useAndroidX=true
android.enableJetifier=true
kotlin.code.style=official
android.nonTransitiveRClass=true
kapt.use.worker.api=true
kapt.incremental.apt=true
